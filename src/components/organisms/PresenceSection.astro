---
import MexicoMap from '../molecules/MexicoMap.astro';
---

<section
  class="presence"
  id="nosotros"
  aria-labelledby="presence-heading"
  itemscope
  itemtype="https://schema.org/Organization"
>
  <div class="presence-content">
    <div class="presence-left">
      <h2 id="presence-heading" class="presence-title" itemprop="name">Presencia</h2>
      <div class="presence-logo-large" itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
        <img
          src="/images/Pixii Logo copy.png"
          alt="PIXII - Empresa de ingeniería eléctrica con presencia nacional en México"
          class="logo-image"
          width="240"
          height="58"
          loading="lazy"
          itemprop="url"
        />
        <meta itemprop="caption" content="Logo de PIXII" />
      </div>
      <p class="presence-description" itemprop="description">
        La energía de Pixii llega a todo México. Nuestra cobertura nacional nos permite estar donde se generan los proyectos que impulsan al país.
      </p>
      <div itemprop="areaServed" itemscope itemtype="https://schema.org/Country">
        <meta itemprop="name" content="México" />
      </div>
      <div itemprop="serviceArea" itemscope itemtype="https://schema.org/GeoShape">
        <meta itemprop="addressCountry" content="MX" />
        <meta itemprop="name" content="Baja California, Nuevo León, San Luis Potosí, Querétaro" />
      </div>
    </div>
  </div>
  <div class="map-overflow-container" role="img" aria-label="Mapa de México mostrando la presencia de PIXII en Baja California, Nuevo León, San Luis Potosí y Querétaro">
    <MexicoMap class="presence-map" interactive={true} highlightedStates={['baja_california', 'nuevo_leon', 'san_luis_potosi', 'queretaro']} />
  </div>
</section>

<style>
  .presence {
    margin: 80px 0;
    position: relative;
    overflow: visible;
  }

  .presence-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 24px;
    position: relative;
    z-index: 2;
    pointer-events: none;
  }

  .presence-left {
    pointer-events: auto;
  }

  .presence-left {
    max-width: 420px;
  }

  .presence-title {
    margin-bottom: 24px;
  }

  .presence-logo-large {
    margin-bottom: 28px;
    line-height: 0;
  }

  .logo-image {
    width: 240px;
    height: 58px;
    object-fit: contain;
    display: block;
  }

  .presence-description {
    font-size: 14px;
    line-height: 1.7;
    color: #666666;
    max-width: 420px;
  }

  .map-overflow-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-33.333%, -50%);
    z-index: 1;
    pointer-events: auto;
  }

  .map-overflow-container :global(.presence-map) {
    overflow: visible;
  }

  .map-overflow-container :global(.mexico-map-svg) {
    max-width: none;
    overflow: visible;
  }

  .map-overflow-container :global(svg) {
    width: 66.666vw; /* 2/3 del viewport */
    height: auto;
    min-width: 500px; /* Mínimo para que no sea muy pequeño */
    max-width: 800px; /* Máximo para que no crezca demasiado */
  }

  @media (max-width: 1024px) {
    .presence-content {
      margin-bottom: 40px;
    }

    .map-overflow-container {
      position: relative;
      top: auto;
      left: auto;
      transform: none;
      width: 100%;
      display: flex;
      justify-content: center;
    }

    .map-overflow-container :global(svg) {
      width: 100%;
      min-width: auto;
      max-width: 600px;
    }
  }

  @media (max-width: 768px) {
    .presence {
      margin: 60px 0;
    }

    .logo-image {
      width: 180px;
      height: 44px;
    }

    .map-overflow-container :global(svg) {
      width: 100%;
      min-width: 350px;
      max-width: 500px;
    }
  }

  @media (max-width: 480px) {
    .map-overflow-container :global(svg) {
      min-width: 300px;
      max-width: 100%;
    }
  }
</style>
